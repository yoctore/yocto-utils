var logger=require("yocto-logger"),_=require("lodash"),path=require("path"),crypto=require("crypto");Utils=function(){},Utils.prototype.forceRelodRequire=function(a){return delete require.cache[a],_(["../..",a,!0]).join("/")},Utils.prototype.allItemIsInList=function(a,b){return!_.isUndefined(a)&&!_.isUndefined(b)&&(!_.isArray(a)&&_.isObject(a)&&(a=Object.keys(a)),!_.isArray(b)&&_.isObject(b)&&(b=Object.keys(b)),_.isArray(a)&&_.isArray(b))?_.isEmpty(_.difference(a,b)):!1},Utils.prototype.randomizedPassword=function(a,b){(_.isUndefined(b)||_.isEmpty(b)||_.isNull(b))&&(b="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890&(!-_%<>");var c=(Math.random()*(b.length-1)).toFixed(0);return a>0?b[c]+this.randomizedPassword(a-1,b):""},Utils.prototype.encrypt=function(a,b){b=JSON.stringify(b);var c=crypto.createCipher("aes256",a),d=c.update(b,"utf-8","hex");return d+=c["final"]("hex")},Utils.prototype.decrypt=function(a,b){var c=crypto.createDecipher("aes256",a),d=c.update(b,"hex","utf-8");return d+=c["final"]("utf-8"),JSON.parse(d)},Utils.prototype.generateSearchDateList=function(a,b,c,d,e){var f=[],g=new Date;b=b||g.getFullYear(),a=a||0;for(var h=a;b>=h;h++)f.push(h.toString());return _.isNull(c)||_.isEmpty(c)||(f[0]=_([c,f[0]]).join(" ")),_.isNull(d)||_.isEmpty(d)||(f[f.length-1]=_([d,f[f.length-1]]).join(" ")),!_.isNull(e)&&e&&(f=f.reverse()),f},Utils.prototype.getCorrectHost=function(a){return _.isUndefined(a)?null:_([a.protocol,a.get("x-forwarded-host")||a.get("x-forwarded-server")||a.get("host")||"localhost"]).join("://")},Utils.prototype.isValidImageFormat=function(a){return a=_(["",a.toLowerCase(),""]).join("|"),-1!=="|jpg|png|jpeg|gif|".indexOf(a)},module.exports=new Utils;